---
title: "API Overview"
description: "Programmatic API for the Vulcn engine"
---

## Installation

```bash
npm install @vulcn/engine
```

## Architecture

The engine exposes two main systems:

- **DriverManager** - Handles recording and running via drivers
- **PluginManager** - Handles payloads and detection via plugins

<CardGroup cols={2}>
  <Card title="DriverManager" icon="car" href="/api/driver-manager">
    Manage recording and running drivers
  </Card>
  <Card title="PluginManager" icon="plug" href="/api/plugin-manager">
    Load and manage plugins
  </Card>
  <Card title="Types" icon="code" href="/api/types">
    TypeScript type definitions
  </Card>
</CardGroup>

## Quick Example

```typescript
import {
  DriverManager,
  PluginManager,
  parseProjectConfig,
} from "@vulcn/engine";
import browserDriver from "@vulcn/driver-browser";

// Set up drivers
const drivers = new DriverManager();
drivers.register(browserDriver);

// Load plugins from config (maps flat keys to internal plugins)
const manager = new PluginManager();
const config = parseProjectConfig({
  payloads: { types: ["xss"] },
  detection: { xss: { dialogs: true, severity: "high" } },
});
await manager.loadFromConfig(config);

// Record a session
const handle = await drivers.startRecording("browser", {
  startUrl: "https://example.com",
  browser: "chromium",
  headless: false,
});

// Wait for user to finish interacting...
const session = await handle.stop();

// Run security tests
const scanResult = await drivers.executeScan([session], manager, {
  headless: true,
  onFinding: (finding) => {
    console.log(`Found: ${finding.title}`);
  },
});

console.log(`Tested ${scanResult.aggregate.payloadsTested} payloads`);
console.log(`Found ${scanResult.aggregate.findings.length} vulnerabilities`);

await manager.destroy();
```

## Module Exports

### Driver System

```typescript
// Driver manager
export { DriverManager } from "./driver-manager";
export { DRIVER_API_VERSION } from "./driver-types";

// Driver types
export type {
  VulcnDriver,
  RecorderDriver,
  RunnerDriver,
  RecordingHandle,
  Session,
  Step,
  RunContext,
  RunResult,
  LoadedDriver,
  DriverSource,
} from "./driver-types";
```

### Plugin System

```typescript
// Plugin manager
export { PluginManager } from "./plugin-manager";
export { PLUGIN_API_VERSION } from "./plugin-types";

// Plugin types
export type {
  VulcnPlugin,
  PluginHooks,
  PluginContext,
  RecordContext,
  DetectContext,
  LoadedPlugin,
  PluginSource,
} from "./plugin-types";
```

### Payload Types

```typescript
export type {
  RuntimePayload,
  PayloadCategory,
  PayloadSource,
  CustomPayload,
} from "./payload-types";
```

### Core Types

```typescript
export type {
  Finding,
  BrowserType,
  RecorderOptions,
  RunnerOptions,
} from "./types";
```

### Project Config

```typescript
// Project loading and config
export { loadProject, findProjectRoot, CONFIG_FILENAME, DIRS } from "./project";
export { parseProjectConfig, VulcnProjectConfigSchema } from "./config";
export type { VulcnProjectConfig } from "./config";
export type { VulcnProject, ProjectPaths } from "./project";
```

## Error Handling

All async methods may throw:

```typescript
try {
  const result = await drivers.executeScan([session], manager);
} catch (error) {
  if (error.message.includes("Driver")) {
    console.error("Driver error:", error.message);
  } else if (error.message.includes("Plugin")) {
    console.error("Plugin error:", error.message);
  } else {
    throw error;
  }
}
```

## TypeScript Support

Full TypeScript support with exported types:

```typescript
import type {
  Session,
  Step,
  Finding,
  VulcnDriver,
  VulcnPlugin,
  RuntimePayload,
} from "@vulcn/engine";
```

<Card title="DriverManager API" icon="car" href="/api/driver-manager">
  Full DriverManager reference
</Card>
